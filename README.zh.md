# Loong(龙) 语言

该程序实现了一个简单的解释器，能够解析和执行基本的数学表达式、变量赋值、三元运算符、函数定义和调用。

## 理念

我们致力于同时为人类和生成式人工智能（如ChatGPT）提供一种更直观（因此也更强大）的编程语言。以下是我们的设计原则：

1. **熟悉的语法**：
   - 我们的语言在语法设计上与Python和JavaScript非常相似，同时可以调用python的所有库。这使得用户可以迅速上手，利用已有的大量资源和社区支持，实现快速开发。
   - 不使用缩进来分析语法树，你可以随意从chatgpt复制代码了。

2. **词法闭包**（对python的“修复”）：
   - 采用词法闭包，使得机器和人类开发者都能更容易理解代码。这一特性不仅增强了代码的灵活性和可维护性，还提高了执行效率。

3. **直观的语法顺序**：
   - 我们的语法结构设计更贴近实际的执行顺序，而非传统的英文语法。这种设计理念能够帮助开发者更直观地理解程序的执行流程，减少抽象层次，提高代码的可读性和维护性。同时也更适合人工智能的注意力机制。

这些设计理念使得我们的编程语言既强大又易于使用，旨在为生成式人工智能开发提供更优的支持和体验。

## 功能

该解释器使用 `lark` 库进行词法和语法分析，支持以下功能：

- **普通功能**: 支持基本的算术运算、比较运算符、逻辑运算符、位运算符。
- **变量赋值**: 支持变量的定义和引用。
- **三元运算符**: 支持 `condition ? expr1 : expr2` 形式的条件运算。
- **数据类型**: 支持双引号括起来的字符串、小数和整数、数组和字典的数据结构以及访问。
- **函数**: 支持函数的定义和调用，包括匿名函数（闭包）。
- **语句块**: 使用分号分隔多个语句。
- **映射和过滤**: 支持 `@` 和 `>?` 运算符，用于集合的映射和过滤操作。

这个列表更加简洁，并清楚地展示了语言的核心功能和特性。


## 语法

### 变量赋值

```
let a = 10;
let b = [1, 2, 3];
let c = { "key1": 10, "key2": 20 };
```

### 算术表达式

```
a + b * 2
```

### 比较运算符

```
a >= b
a <= b
a == b
a > b
a < b
```

### 逻辑运算符

```
a and b
a or b
not a
```

### 位运算符

```
a & b
a | b
a ^ b
~a
a << b
a >> b
```

### 条件运算符（三元运算符）

```
a > 10 ? "Yes" : "No"
```

### 数组与字典

#### 数组

```
let arr = [1, 2, 3];
arr[0]  # 访问数组第一个元素
```

#### 字典

```
let dict = { key1: 10, key2: 20 };
dict["key1"]  # 访问字典中的值
```

### 函数定义和调用

#### 函数定义

```
fun foo(a, b): a >= b end
```

#### 函数调用

```
foo(a, b)
```

### 参数列表和实参列表

#### 参数列表

```
fun foo(a, b, c): a + b + c end
```

#### 实参列表

```
foo(1, 2, 3)
```

### 短函数表达式

```
let f = a => a * 2;
f(5)  # 返回 10
```

## 语法示例

```
# 变量赋值
let a = 10;
let b = 3.14;

# 字符串
let c = "Hello, " + "world!";

# 条件运算符
let result = (a + b > 12 ? "Yes" : "No") + ", " + c;

# 数组与字典
let arr = [1, 2, 3];
let dict = { key1: 10, key2: 20 };
let val = dict["key1"];

# 函数定义
fun sum(x, y):
    x + y
end

# 函数调用
let result = sum(a, b);

# 短函数表达式
let double = a => a * 2;
let doubled = double(5);

# 完整示例
(a + b > 12 ? "Yes" : "No") + ", " + c;
```

## 安装与使用

1. 安装依赖项：
    ```bash
    pip install lark colorama termcolor
    ```

2. 运行解释器：
    ```bash
    python loong.py
    ```

## 测试

运行测试用例以确保解释器的正确性：

```bash
 python test_loong.py
```

## 贡献

如果您有兴趣为该项目做出贡献，请提交问题报告或拉取请求。

## 许可证

该项目使用 GPL 许可证。