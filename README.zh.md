# Loong 解释器

该程序实现了一个简单的解释器，能够解析和执行基本的数学表达式、变量赋值、三元运算符、函数定义和调用。

## 功能

该解释器使用 `lark` 库进行词法和语法分析，支持以下功能：

- 基本的算术运算：加法、减法、乘法、除法。
- 比较运算符：大于、小于、等于、大于等于、小于等于。
- 逻辑运算符：与、或、非。
- todo 位运算符：按位与、按位或、按位异或、按位取反、左移、右移。
- 变量赋值和引用。
- 支持三元运算符。
- 支持字符串（双引号括起来）。
- 支持小数和整数。
- 支持数组和字典（包括数组访问、字典访问）。
- 支持函数定义和调用。
- **语句块**：使用分号分隔多个语句。

## 语法

### 变量赋值

```
let a = 10;
let b = [1, 2, 3];
let c = { "key1": 10, "key2": 20 };
```

### 算术表达式

```
a + b * 2
```

### 比较运算符

```
a >= b
a <= b
a == b
a > b
a < b
```

### 逻辑运算符

```
a and b
a or b
not a
```

### 位运算符

```
a & b
a | b
a ^ b
~a
a << b
a >> b
```

### 条件运算符（三元运算符）

```
a > 10 ? "Yes" : "No"
```

### 数组与字典

#### 数组

```
let arr = [1, 2, 3];
arr[0]  # 访问数组第一个元素
```

#### 字典

```
let dict = { key1: 10, key2: 20 };
dict["key1"]  # 访问字典中的值
```

### 函数定义和调用

#### 函数定义

```
fun foo(a, b): a >= b end
```

#### 函数调用

```
foo(a, b)
```

### 参数列表和实参列表

#### 参数列表

```
fun foo(a, b, c): a + b + c end
```

#### 实参列表

```
foo(1, 2, 3)
```

### 短函数表达式

```
let f = a => a * 2;
f(5)  # 返回 10
```

## 语法示例

```
# 变量赋值
let a = 10;
let b = 3.14;

# 字符串
let c = "Hello, " + "world!";

# 条件运算符
let result = (a + b > 12 ? "Yes" : "No") + ", " + c;

# 数组与字典
let arr = [1, 2, 3];
let dict = { key1: 10, key2: 20 };
let val = dict["key1"];

# 函数定义
fun sum(x, y):
    x + y
end

# 函数调用
let result = sum(a, b);

# 短函数表达式
let double = a => a * 2;
let doubled = double(5);

# 完整示例
(a + b > 12 ? "Yes" : "No") + ", " + c;
```

## 安装与使用

1. 安装依赖项：
    ```bash
    pip install lark colorama termcolor
    ```

2. 运行解释器：
    ```bash
    python loong.py
    ```

## 测试

运行测试用例以确保解释器的正确性：

```bash
 python test_loong.py
```

## 贡献

如果您有兴趣为该项目做出贡献，请提交问题报告或拉取请求。

## 许可证

该项目使用 GPL 许可证。